---
title: Labs
layout: default
toc: true
nav: rule
---
<!-- *********************
  DO NOT EDIT THIS FILE
  It is a generated build output from Stardoc.
  Instead you must edit the .bzl file where the rules are declared,
  or possibly a markdown file next to the .bzl file
 ********************* -->
# Bazel nodejs Labs

This package contains experimental code which isn't at the same quality or stability standard as our main packages.

By using code in Labs, we trust that you understand:

- It might be deleted at any time
- We offer no support guarantees for using it
- Breaking changes can happen in any release
- We could release with bugs or other brokenness
- Documentation is sparse


## protobufjs_ts_library

Wraps https://github.com/dcodeIO/protobuf.js for use in Bazel.

<code>ts_proto_library</code> has identical outputs to <code>ts_library</code>, so it can be used anywhere
a <code>ts_library</code> can appear, such as in the <code>deps[]</code> of another <code>ts_library</code>.

Example:

{% highlight python %}
load("@npm//@bazel/typescript:index.bzl", "ts_library", "ts_proto_library")

proto_library(
    name = "car_proto",
    srcs = ["car.proto"],
)

ts_proto_library(
    name = "car",
    deps = [":car_proto"],
)

ts_library(
    name = "test_lib",
    testonly = True,
    srcs = ["car.spec.ts"],
    deps = [":car"],
)
{% endhighlight %}

Note in this example we named the <code>ts_proto_library</code> rule <code>car</code> so that the
result will be <code>car.d.ts</code>. This means our TypeScript code can just
<code>import {symbols} from &#039;./car&#039;</code>. Use the <code>output_name</code> attribute if you want to
name the rule differently from the output file.

The JavaScript produced by protobuf.js has a runtime dependency on a support library.
Under devmode (e.g. <code>ts_devserver</code>, <code>karma_web_test_suite</code>) you'll need to include these scripts
in the <code>bootstrap</code> phase (before Require.js loads). You can use the label
<code>@npm//@bazel/labs/protobufjs:bootstrap_scripts</code> to reference these scripts
in the <code>bootstrap</code> attribute of <code>karma_web_test_suite</code> or <code>ts_devserver</code>.

To complete the example above, you could write a <code>karma_web_test_suite</code>:

{% highlight python %}
load("@npm//@bazel/karma:index.bzl", "karma_web_test_suite")

karma_web_test_suite(
    name = "test",
    deps = ["test_lib"],
    bootstrap = ["@npm//@bazel/labs/protobufjs:bootstrap_scripts"],
    browsers = [
        "@io_bazel_rules_webtesting//browsers:chromium-local",
        "@io_bazel_rules_webtesting//browsers:firefox-local",
    ],
)
{% endhighlight %}


<pre>
protobufjs_ts_library(<a href="#protobufjs_ts_library-name">name</a>, <a href="#protobufjs_ts_library-deps">deps</a>, <a href="#protobufjs_ts_library-output_name">output_name</a>)
</pre>

**ATTRIBUTES**

<table class="table table-params">
  <thead>
  <tr>
    <th>Name</th>
    <th>Description</th>
    <th>Type</th>
    <th>Mandatory</th>
    <th>Default</th>
  </tr>
  </thead>
  <tbody>
            <tr id="protobufjs_ts_library-name">
        <td>name</td>
        <td>
                            A unique name for this target.
                                </td>
        <td><a href="https://bazel.build/docs/build-ref.html#name">Name</a></td>
        <td>required</td>
        <td>
            
        </td>
      </tr>
            <tr id="protobufjs_ts_library-deps">
        <td>deps</td>
        <td>
                            proto_library targets
                                </td>
        <td><a href="https://bazel.build/docs/build-ref.html#labels">List of labels</a></td>
        <td>optional</td>
        <td>
            []
        </td>
      </tr>
            <tr id="protobufjs_ts_library-output_name">
        <td>output_name</td>
        <td>
                            Name of the resulting module, which you will import from.
            If not specified, the name will match the target's name.
                                </td>
        <td>String</td>
        <td>optional</td>
        <td>
            ""
        </td>
      </tr>
        </tbody>
</table>



## ts_proto_library



<pre>
ts_proto_library(<a href="#ts_proto_library-name">name</a>, <a href="#ts_proto_library-proto">proto</a>)
</pre>

**ATTRIBUTES**

<table class="table table-params">
  <thead>
  <tr>
    <th>Name</th>
    <th>Description</th>
    <th>Type</th>
    <th>Mandatory</th>
    <th>Default</th>
  </tr>
  </thead>
  <tbody>
            <tr id="ts_proto_library-name">
        <td>name</td>
        <td>
                            A unique name for this target.
                                </td>
        <td><a href="https://bazel.build/docs/build-ref.html#name">Name</a></td>
        <td>required</td>
        <td>
            
        </td>
      </tr>
            <tr id="ts_proto_library-proto">
        <td>proto</td>
        <td>
                                      The dependencies of this attribute must provide: ProtoInfo
                    </td>
        <td><a href="https://bazel.build/docs/build-ref.html#labels">Label</a></td>
        <td>required</td>
        <td>
            
        </td>
      </tr>
        </tbody>
</table>


